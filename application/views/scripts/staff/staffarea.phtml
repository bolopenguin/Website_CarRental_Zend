<?php if ($this->authInfo('role') === "admin"): ?>
    <h2>
        Area Riservata Amministratore
    </h2>
<?php else: ?>
    <h2>
        Area Riservata Staff
    </h2>
<?php endif; ?>


<nav style="width: 500px;float: left; margin-left: 1em">
       
    <?php if ($this->authInfo('role') === "admin"): ?>
        <a href="<?= $this->url(array(
                            'controller' => 'admin',
                            'action'     => 'adminarea',
                                              ), 
                            'default',true
                        ); 
                     ?>" title="Area Riservata Admin">
            Funzionalit√† dell'Admin
        </a>
    
        <br>
    <?php endif; ?>
    
    <a href="<?=
    $this->url(array(
        'controller' => 'staff',
        'action' => 'staffarea',
        'operazione' => 'inserisci',
            ), 'default', true
    );
    ?>" title="Inserisci">     
        Inserisci una nuova auto
    </a>

    <br>

    <a href="<?=
    $this->url(array(
        'controller' => 'staff',
        'action' => 'staffarea',
        'operazione' => 'elimina',
            ), 'default', true
    );
    ?>" title="Elimina">     
        Elimina un'auto
    </a>

    <br>

    <a href="<?=
    $this->url(array(
        'controller' => 'staff',
        'action' => 'staffarea',
        'operazione' => 'seleziona',
            ), 'default', true
    );
    ?>" title="Modifica">     
        Modifica i dati di un'auto
    </a>

    <br>

    <a href="<?=
    $this->url(array(
        'controller' => 'staff',
        'action' => 'staffarea',
        'operazione' => 'statistiche',
            ), 'default', true
    );
    ?>" title="Statistiche">     
        Statistiche per Mese
    </a>
   
</nav>



<?php if ($this->operazione === "inserisci"): ?>
    <h3>
        Inserimento di una nuova auto
    </h3>
    <fieldset style="float: left" >
        <legend> <h3> Inserisci la nuova Auto </h3> </legend>
        <?php echo $this->inserisciForm; ?>
    </fieldset>
<?php endif; ?>

<?php if ($this->operazione === "elimina"): ?>
    <h3>
        Eliminazione di un'auto esistente
    </h3>
    <div style="float: right; margin-right: 150px">
        <table style="background-color:#eee859; border-collapse:collapse; width: 400px; " border="">
            <tr><th style="width: 240px"> Modello </th> <th style="width: 160px"> Targa </th> </tr>
        </table>
        <?php foreach ($this->auto as $auto) : ?>
            <table style="background-color:#eee859; border-collapse:collapse; width: 400px; " border="">
                <tbody>
                    <tr>
                        <td style="width: 240px"><?php echo '' . $auto->marca . " " . $auto->modello . '' ?></td>
                        <td style="width: 160px"><?php echo'' . $auto->targa . '' ?></td>
                    </tr>
                </tbody>
            </table>
        <?php endforeach ?>
    </div>

    <fieldset style="width: 300px; clear:both;">
        <legend> <h3> Scegli la targa dell'auto da eliminare </h3> </legend>
        <?php echo $this->eliminaForm; ?>
    </fieldset>

<?php endif; ?>

<?php if ($this->operazione === "seleziona"): ?>
    <h3>
        Modifica di un'auto esistente
    </h3>
    <div style="float: right; margin-right: 150px">
        <table style="background-color:#eee859; border-collapse:collapse; width: 400px; " border="">
            <tr><th style="width: 240px"> Modello </th> <th style="width: 160px"> Targa </th> </tr>
        </table>
        <?php foreach ($this->auto as $auto) : ?>
            <table style="background-color:#eee859; border-collapse:collapse; width: 400px; " border="">
                <tbody>
                    <tr>
                        <td style="width: 240px"><?php echo '' . $auto->marca . " " . $auto->modello . '' ?></td>
                        <td style="width: 160px"><?php echo'' . $auto->targa . '' ?></td>
                    </tr>
                </tbody>
            </table>
        <?php endforeach ?>
    </div>

    <fieldset style="width: 300px; clear:both;">
        <legend> <h3> Seleziona la targa dell'auto da modificare </h3> </legend>
        <?php echo $this->selezionaForm; ?>
    </fieldset>
<?php endif; ?>

<?php if ($this->operazione === "modifica"): ?>
    <h3>
        Modifica di un'auto esistente
    </h3>
    <fieldset style="width: 300px; clear:both;">
        <legend> <h3> Inserisci i nuovi dati </h3> </legend>
        <?php echo $this->modificaForm->populate($this->macchina);?>
    </fieldset>

<?php endif; ?>

<?php if ($this->operazione === "statistiche"): ?>
    <h3>
        Statistiche delle prenotazioni per mese
    </h3>
    <fieldset style="width: 300px; clear:both;">
        <legend> <h3> Seleziona il mese </h3> </legend>
        <?php echo $this->statisticheForm; ?>
    </fieldset>


        <div style="float: right; margin-right: 150px">
            <table style="background-color:#eee859; border-collapse:collapse; width: 800px; " border="">
                <tr>
                    <th style="width: 200px"> Username </th> 
                    <th style="width: 200px"> Targa </th> 
                    <th style="width: 200px"> Marca </th> 
                    <th style="width: 200px"> Modello </th> 
                </tr>
            </table>
            
            <?php foreach ($this->prenotazioni as $prenotazione) : ?>
                <table style="background-color:#eee859; border-collapse:collapse; width: 800px; " border="">
                    <tbody>
                        <tr>
                            <td style="width: 200px"><?php echo '' . $prenotazione->username  . '' ?></td>
                            <td style="width: 200px"><?php echo'' . $prenotazione->targa . '' ?></td>
                            <td style="width: 200px"><?php echo'' . $prenotazione->marca . '' ?></td>
                            <td style="width: 200px"><?php echo'' . $prenotazione->modello . '' ?></td>
                        </tr>
                    </tbody>
                </table>
            <?php endforeach ?>
            
        </div>
<?php endif; ?>

